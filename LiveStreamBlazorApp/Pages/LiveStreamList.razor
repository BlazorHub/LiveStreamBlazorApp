@page "/"
@inherits LiveStreamListBase

<h3>Live Streams</h3>
<button class="btn btn-primary" @onclick="@ConnectToServer" disabled="@isConnected">Connect</button>
<table>
    <tr>
        <th>Connection Status:</th>
        <td>@connectionStatus</td>

        <th>Messages:</th>

        @foreach (var msg in notifications)
        {
            <td>@msg</td>
        }
    </tr>
</table>

<h4></h4>

<div>

</div>

<table class="table table-striped">
    <tr>
        <th>
            Notification Connetion Status:
        </th>
        <td>
            <font color="@NotificationServerConnectionStatusColor">@NotificationServerConnectionStatus</font>
        </td>
    </tr>
    <tr>
        <th>
            Notification:
        </th>
        <td>
            @NotificationMsg
        </td>
    </tr>
    <tr>
        <th>
            Media Database Connetion Status:
        </th>
        <td>
            <font color="@NotificationServerConnectionStatusColor">@NotificationServerConnectionStatus</font>
        </td>
        <th>
            Database Notification:
        </th>
        <td>
            @MediaDbNotificationMsg
        </td>
    </tr>

</table>


@if (LiveStreams == null)
{
    <div class="spinner"></div>
}
else
{
    <table class="table table-striped">
        <tr>
            <th>Id</th>
            <th>Title</th>
            <th>Description</th>
            <th>Source</th>
        </tr>
        @foreach (var livestream in LiveStreams)
        {
            <tr>
                <td>@livestream.Id</td>
                <td>@livestream.Title</td>
                <td>@livestream.Description</td>
                <td>@livestream.Url</td>
            </tr>
        }
    </table>

}
<button class="btn btn-primary" @onclick="@AddNewStream">Add New Stream</button>

@if (modalType == ModalType.Create)
{

    <LiveStreamModalCreateEdit OnCloseModal="@OnCloseModalCallback" ModalTitle="Add Live Stream"></LiveStreamModalCreateEdit>

}
